import React from 'react'

const getArrow = ({
  rating,
  index,
  size,
  activeColor,
  disabledColor
}: {
  rating: number
  index: number
  size: 'small' | 'medium' | 'large' | 'extraLarge'
  activeColor: string
  disabledColor: string
}) => {
  const arrows = (fill: string) => ({
    small: {
      filled: (
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.00004 1.16602C8.25379 1.16602 8.48553 1.31006 8.59785 1.5376L10.5029 5.39699L14.7631 6.01969C15.0142 6.05638 15.2226 6.23239 15.3009 6.47373C15.3791 6.71507 15.3136 6.9799 15.1319 7.15692L12.0497 10.1589L12.7771 14.4C12.82 14.6501 12.7172 14.9029 12.5119 15.0521C12.3065 15.2012 12.0344 15.2209 11.8097 15.1027L8.00004 13.0992L4.19034 15.1027C3.96573 15.2209 3.69354 15.2012 3.48822 15.0521C3.2829 14.9029 3.18007 14.6501 3.22297 14.4L3.95036 10.1589L0.868218 7.15692C0.686472 6.9799 0.620957 6.71507 0.699209 6.47373C0.777461 6.23239 0.985914 6.05638 1.23695 6.01969L5.4972 5.39699L7.40224 1.5376C7.51455 1.31006 7.74629 1.16602 8.00004 1.16602Z"
            fill={fill}
          />
        </svg>
      ),
      semiFilled: (
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.59785 1.5376C8.48553 1.31006 8.25379 1.16602 8.00004 1.16602C7.74629 1.16602 7.51455 1.31006 7.40224 1.5376L5.4972 5.39699L1.23695 6.01969C0.985914 6.05638 0.777461 6.23239 0.699209 6.47373C0.620957 6.71507 0.686472 6.9799 0.868218 7.15692L3.95036 10.1589L3.22297 14.4C3.18007 14.6501 3.2829 14.9029 3.48822 15.0521C3.69354 15.2012 3.96573 15.2209 4.19034 15.1027L8.00004 13.0992L11.8097 15.1027C12.0344 15.2209 12.3065 15.2012 12.5119 15.0521C12.7172 14.9029 12.82 14.6501 12.7771 14.4L12.0497 10.1589L15.1319 7.15692C15.3136 6.9799 15.3791 6.71507 15.3009 6.47373C15.2226 6.23239 15.0142 6.05638 14.7631 6.01969L10.5029 5.39699L8.59785 1.5376ZM8.31034 11.756L11.2346 13.2938L10.6763 10.0387C10.6392 9.82236 10.711 9.60161 10.8682 9.44844L13.2344 7.14375L9.96362 6.66567C9.74672 6.63397 9.55926 6.49766 9.46224 6.3011L8.00004 3.33885V11.6793C8.10663 11.6793 8.21321 11.7049 8.31034 11.756Z"
            fill={fill}
          />
        </svg>
      ),
      disabled: (
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.00004 1.16602C8.25379 1.16602 8.48553 1.31006 8.59785 1.5376L10.5029 5.39699L14.7631 6.01969C15.0142 6.05639 15.2226 6.23239 15.3009 6.47373C15.3791 6.71507 15.3136 6.9799 15.1319 7.15692L12.0497 10.1589L12.7771 14.4C12.82 14.6501 12.7172 14.9029 12.5119 15.0521C12.3065 15.2012 12.0343 15.2209 11.8097 15.1027L8.00004 13.0992L4.19034 15.1027C3.96573 15.2209 3.69354 15.2012 3.48822 15.0521C3.2829 14.9029 3.18007 14.6501 3.22297 14.4L3.95036 10.1589L0.868218 7.15692C0.686472 6.9799 0.620957 6.71507 0.699209 6.47373C0.777461 6.23239 0.985914 6.05639 1.23695 6.01969L5.4972 5.39699L7.40224 1.5376C7.51455 1.31006 7.74629 1.16602 8.00004 1.16602ZM8.00004 3.33885L6.53785 6.3011C6.44082 6.49766 6.25336 6.63397 6.03646 6.66567L2.76565 7.14375L5.13186 9.44844C5.28911 9.6016 5.36089 9.82236 5.32378 10.0387L4.76549 13.2938L7.68974 11.756C7.88399 11.6538 8.11609 11.6538 8.31034 11.756L11.2346 13.2938L10.6763 10.0387C10.6392 9.82236 10.711 9.6016 10.8682 9.44844L13.2344 7.14375L9.96362 6.66567C9.74672 6.63397 9.55926 6.49766 9.46224 6.3011L8.00004 3.33885Z"
            fill={fill}
          />
        </svg>
      )
    },
    medium: {
      filled: (
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12 1.99023C12.3806 1.99023 12.7282 2.20631 12.8967 2.54761L15.7543 8.33668L22.1446 9.27073C22.5212 9.32577 22.8338 9.58977 22.9512 9.95178C23.0686 10.3138 22.9703 10.711 22.6977 10.9766L18.0745 15.4796L19.1656 21.8411C19.2299 22.2163 19.0757 22.5955 18.7677 22.8192C18.4597 23.043 18.0514 23.0724 17.7145 22.8953L12 19.89L6.28547 22.8953C5.94855 23.0724 5.54026 23.043 5.23228 22.8192C4.92431 22.5955 4.77006 22.2163 4.83441 21.8411L5.92549 15.4796L1.3023 10.9766C1.02968 10.711 0.931406 10.3138 1.04878 9.95178C1.16616 9.58977 1.47884 9.32577 1.8554 9.27073L8.24575 8.33668L11.1033 2.54761C11.2718 2.20631 11.6194 1.99023 12 1.99023Z"
            fill={fill}
          />
        </svg>
      ),
      semiFilled: (
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12.8967 2.54761C12.7282 2.20631 12.3806 1.99023 12 1.99023C11.6194 1.99023 11.2718 2.20631 11.1033 2.54761L8.24575 8.33668L1.8554 9.27073C1.47884 9.32577 1.16616 9.58977 1.04878 9.95178C0.931406 10.3138 1.02968 10.711 1.3023 10.9766L5.92549 15.4796L4.83441 21.8411C4.77006 22.2163 4.92431 22.5955 5.23228 22.8192C5.54026 23.043 5.94855 23.0724 6.28547 22.8953L12 19.89L17.7145 22.8953C18.0514 23.0724 18.4597 23.043 18.7677 22.8192C19.0757 22.5955 19.2299 22.2163 19.1656 21.8411L18.0745 15.4796L22.6977 10.9766C22.9703 10.711 23.0686 10.3138 22.9512 9.95178C22.8338 9.58977 22.5212 9.32577 22.1446 9.27073L15.7543 8.33668L12.8967 2.54761ZM12.4655 17.8751L16.8518 20.1819L16.0144 15.2992C15.9587 14.9747 16.0664 14.6436 16.3023 14.4138L19.8516 10.9568L14.9454 10.2397C14.62 10.1921 14.3388 9.98769 14.1933 9.69284L12 5.24948V17.7602C12.1599 17.7602 12.3198 17.7985 12.4655 17.8751Z"
            fill={fill}
          />
        </svg>
      ),
      disabled: (
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12 1.99023C12.3806 1.99023 12.7282 2.20631 12.8967 2.54761L15.7543 8.33668L22.1446 9.27073C22.5212 9.32577 22.8338 9.58977 22.9512 9.95178C23.0686 10.3138 22.9703 10.711 22.6977 10.9766L18.0745 15.4796L19.1656 21.8411C19.2299 22.2163 19.0757 22.5955 18.7677 22.8192C18.4597 23.043 18.0514 23.0724 17.7145 22.8953L12 19.89L6.28547 22.8953C5.94855 23.0724 5.54026 23.043 5.23228 22.8192C4.92431 22.5955 4.77006 22.2163 4.83441 21.8411L5.92549 15.4796L1.3023 10.9766C1.02968 10.711 0.931406 10.3138 1.04878 9.95178C1.16616 9.58977 1.47884 9.32577 1.8554 9.27073L8.24575 8.33668L11.1033 2.54761C11.2718 2.20631 11.6194 1.99023 12 1.99023ZM12 5.24948L9.80671 9.69284C9.66117 9.98768 9.37999 10.1921 9.05464 10.2397L4.14843 10.9568L7.69774 14.4138C7.93362 14.6436 8.04128 14.9747 7.98562 15.2992L7.14819 20.1819L11.5345 17.8751C11.8259 17.7219 12.1741 17.7219 12.4655 17.8751L16.8518 20.1819L16.0144 15.2992C15.9587 14.9747 16.0664 14.6436 16.3023 14.4138L19.8516 10.9568L14.9454 10.2397C14.62 10.1921 14.3388 9.98768 14.1933 9.69284L12 5.24948Z"
            fill={fill}
          />
        </svg>
      )
    },
    large: {
      filled: (
        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M16 2.16797C16.519 2.16797 16.993 2.46261 17.2228 2.92803L21.1194 10.8222L29.8335 12.0959C30.347 12.171 30.7734 12.531 30.9335 13.0246C31.0935 13.5183 30.9595 14.06 30.5878 14.4221L24.2834 20.5625L25.7713 29.2374C25.859 29.749 25.6487 30.2661 25.2287 30.5711C24.8087 30.8762 24.252 30.9164 23.7925 30.6748L16 26.5768L8.20745 30.6748C7.74802 30.9164 7.19127 30.8762 6.7713 30.5711C6.35133 30.2661 6.14099 29.749 6.22874 29.2374L7.71658 20.5625L1.41222 14.4221C1.04047 14.06 0.906462 13.5183 1.06652 13.0246C1.22658 12.531 1.65296 12.171 2.16645 12.0959L10.8806 10.8222L14.7772 2.92803C15.007 2.46261 15.481 2.16797 16 2.16797Z"
            fill={fill}
          />
        </svg>
      ),
      semiFilled: (
        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M17.2228 2.92803C16.993 2.46261 16.519 2.16797 16 2.16797C15.481 2.16797 15.007 2.46261 14.7772 2.92803L10.8806 10.8222L2.16645 12.0959C1.65296 12.171 1.22658 12.531 1.06652 13.0246C0.906462 13.5183 1.04047 14.06 1.41222 14.4221L7.71658 20.5625L6.22874 29.2374C6.14099 29.749 6.35133 30.2661 6.7713 30.5711C7.19127 30.8762 7.74802 30.9164 8.20745 30.6748L16 26.5768L23.7925 30.6748C24.252 30.9164 24.8087 30.8762 25.2287 30.5711C25.6487 30.2661 25.859 29.749 25.7713 29.2374L24.2834 20.5625L30.5878 14.4221C30.9595 14.06 31.0935 13.5183 30.9335 13.0246C30.7734 12.531 30.347 12.171 29.8335 12.0959L21.1194 10.8222L17.2228 2.92803ZM16.6347 23.8292L22.6161 26.9747L21.4742 20.3166C21.3983 19.8741 21.5451 19.4225 21.8667 19.1093L26.7067 14.3951L20.0164 13.4172C19.5727 13.3524 19.1893 13.0736 18.9908 12.6715L16 6.6124V23.6725C16.218 23.6725 16.436 23.7247 16.6347 23.8292Z"
            fill={fill}
          />
        </svg>
      ),
      disabled: (
        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M16 2.16797C16.519 2.16797 16.993 2.46261 17.2228 2.92803L21.1194 10.8222L29.8335 12.0959C30.347 12.171 30.7734 12.531 30.9335 13.0246C31.0935 13.5183 30.9595 14.06 30.5878 14.4221L24.2834 20.5625L25.7713 29.2374C25.859 29.749 25.6487 30.2661 25.2287 30.5711C24.8087 30.8762 24.252 30.9164 23.7925 30.6748L16 26.5768L8.20745 30.6748C7.74802 30.9164 7.19127 30.8762 6.7713 30.5711C6.35133 30.2661 6.14099 29.749 6.22874 29.2374L7.71658 20.5625L1.41222 14.4221C1.04047 14.06 0.906462 13.5183 1.06652 13.0246C1.22658 12.531 1.65296 12.171 2.16645 12.0959L10.8806 10.8222L14.7772 2.92803C15.007 2.46261 15.481 2.16797 16 2.16797ZM16 6.61239L13.0092 12.6715C12.8107 13.0736 12.4273 13.3524 11.9836 13.4172L5.29332 14.3951L10.1333 19.1093C10.4549 19.4225 10.6017 19.8741 10.5258 20.3166L9.3839 26.9747L15.3653 23.8292C15.7626 23.6202 16.2374 23.6202 16.6347 23.8292L22.6161 26.9747L21.4742 20.3166C21.3983 19.8741 21.5451 19.4225 21.8667 19.1093L26.7067 14.3951L20.0164 13.4172C19.5727 13.3524 19.1893 13.0736 18.9908 12.6715L16 6.61239Z"
            fill={fill}
          />
        </svg>
      )
    },
    extraLarge: {
      filled: (
        <svg width="40" height="41" viewBox="0 0 40 41" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M20 3.30273C20.6228 3.30273 21.1917 3.65631 21.4673 4.2148L26.1433 13.6878L36.6003 15.2163C37.2164 15.3063 37.7281 15.7383 37.9202 16.3307C38.1122 16.9231 37.9514 17.5731 37.5053 18.0076L29.9401 25.3762L31.7255 35.786C31.8308 36.4 31.5784 37.0205 31.0744 37.3865C30.5705 37.7527 29.9024 37.8009 29.3511 37.5109L20 32.5933L10.6489 37.5109C10.0976 37.8009 9.42952 37.7527 8.92556 37.3865C8.42159 37.0205 8.16919 36.4 8.27449 35.786L10.0599 25.3762L2.49467 18.0076C2.04856 17.5731 1.88775 16.9231 2.07983 16.3307C2.2719 15.7383 2.78356 15.3063 3.39974 15.2163L13.8567 13.6878L18.5327 4.2148C18.8083 3.65631 19.3772 3.30273 20 3.30273Z"
            fill={fill}
          />
        </svg>
      ),
      semiFilled: (
        <svg width="40" height="41" viewBox="0 0 40 41" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M21.4673 4.2148C21.1917 3.65631 20.6228 3.30273 20 3.30273C19.3772 3.30273 18.8083 3.65631 18.5327 4.2148L13.8567 13.6878L3.39974 15.2163C2.78356 15.3063 2.2719 15.7383 2.07983 16.3307C1.88775 16.9231 2.04856 17.5731 2.49467 18.0076L10.0599 25.3762L8.27449 35.786C8.16919 36.4 8.42159 37.0205 8.92556 37.3865C9.42952 37.7527 10.0976 37.8009 10.6489 37.5109L20 32.5933L29.3511 37.5109C29.9024 37.8009 30.5705 37.7527 31.0744 37.3865C31.5784 37.0205 31.8308 36.4 31.7255 35.786L29.9401 25.3762L37.5053 18.0076C37.9514 17.5731 38.1122 16.9231 37.9202 16.3307C37.7281 15.7383 37.2164 15.3063 36.6003 15.2163L26.1433 13.6878L21.4673 4.2148ZM20.7616 29.2962L27.9393 33.0708L26.569 25.0811C26.4779 24.5501 26.6541 24.0082 27.0401 23.6323L32.848 17.9753L24.8197 16.8019C24.2873 16.724 23.8272 16.3895 23.589 15.907L20 8.63605V29.1081C20.2616 29.1081 20.5232 29.1708 20.7616 29.2962Z"
            fill={fill}
          />
        </svg>
      ),
      disabled: (
        <svg width="40" height="41" viewBox="0 0 40 41" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M20 3.30273C20.6228 3.30273 21.1917 3.65631 21.4673 4.2148L26.1433 13.6878L36.6003 15.2163C37.2164 15.3063 37.7281 15.7383 37.9202 16.3307C38.1122 16.9231 37.9514 17.5731 37.5053 18.0076L29.9401 25.3762L31.7255 35.786C31.8308 36.4 31.5784 37.0205 31.0744 37.3865C30.5705 37.7527 29.9024 37.8009 29.3511 37.5109L20 32.5933L10.6489 37.5109C10.0976 37.8009 9.42952 37.7527 8.92555 37.3865C8.42159 37.0205 8.16919 36.4 8.27449 35.786L10.0599 25.3762L2.49467 18.0076C2.04856 17.5731 1.88775 16.9231 2.07983 16.3307C2.2719 15.7383 2.78356 15.3063 3.39974 15.2163L13.8567 13.6878L18.5327 4.2148C18.8083 3.65631 19.3772 3.30273 20 3.30273ZM20 8.63605L16.411 15.907C16.1728 16.3895 15.7127 16.724 15.1803 16.8019L7.15198 17.9753L12.9599 23.6323C13.3459 24.0082 13.5221 24.5501 13.431 25.0811L12.0607 33.0709L19.2384 29.2962C19.7152 29.0454 20.2848 29.0454 20.7616 29.2962L27.9393 33.0708L26.569 25.0811C26.4779 24.5501 26.6541 24.0082 27.0401 23.6323L32.848 17.9753L24.8197 16.8019C24.2873 16.724 23.8272 16.3895 23.589 15.907L20 8.63605Z"
            fill={fill}
          />
        </svg>
      )
    }
  })
  if (index <= rating - 1) {
    return arrows(activeColor)[size]?.filled
  }
  if (index > Math.ceil(rating) - 1) {
    return arrows(disabledColor)[size]?.disabled
  }
  return arrows(activeColor)[size]?.semiFilled
}

interface Props {
  className?: string
  rating: number | null
  showLabel?: boolean
  activeColor?: string
  disabledColor?: string
  size?: 'small' | 'medium' | 'large' | 'extraLarge'
}

export default function Rating({
  className = '',
  rating = 0,
  showLabel,
  size = 'small',
  activeColor = '#161616',
  disabledColor = '#808080'
}: Props) {
  const numberRating = rating ?? 0
  const STAR_COUNT = 5

  return (
    <div className={`flex items-center ${className}`}>
      <div className="flex items-center gap-1">
        {[...Array(STAR_COUNT)].map((_, index) =>
          getArrow({rating: numberRating, index, size, activeColor, disabledColor})
        )}
      </div>
      {showLabel ? <p className="subtitle ml-2">{numberRating.toFixed(1)}</p> : null}
    </div>
  )
}
